<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{.Title}}</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f6f9; margin: 0; padding: 20px; color: #2d3436; }
  .container { max-width: 720px; margin: 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); overflow: hidden; }
  .header { background: linear-gradient(135deg, #0c2461 0%, #1e3799 50%, #0a3d62 100%); color: #fff; padding: 32px 28px; text-align: center; }
  .header h1 { margin: 0 0 4px 0; font-size: 24px; letter-spacing: -0.5px; }
  .header .subtitle { font-size: 14px; opacity: 0.85; }
  .section-title { background: #f8f9fa; padding: 12px 20px; font-size: 15px; font-weight: 700; color: #0c2461; border-bottom: 2px solid #1e3799; border-top: 1px solid #eee; }
  .market-table { width: 100%; border-collapse: collapse; font-size: 13px; }
  .market-table th { background: #f0f2f5; padding: 8px 10px; text-align: left; font-weight: 600; color: #636e72; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
  .market-table td { padding: 8px 10px; border-bottom: 1px solid #f0f2f5; text-align: left; font-size: 13px; }
  .market-table td:first-child { font-weight: 600; color: #2d3436; }
  .positive { color: #22c55e; }
  .negative { color: #ef4444; }
  .neutral { color: #9ca3af; }
  .bg-pos { background: #f0fdf4; }
  .bg-neg { background: #fef2f2; }
  .movers-title { background: #f8f9fa; padding: 10px 20px; font-size: 13px; font-weight: 600; color: #0c2461; border-top: 1px solid #eee; }
  .movers-grid { display: flex; gap: 16px; padding: 12px 20px; flex-wrap: wrap; }
  .movers-col { flex: 1; min-width: 180px; }
  .movers-col h4 { margin: 0 0 8px 0; font-size: 13px; font-weight: 700; }
  .mover-item { font-size: 13px; padding: 3px 0; }
  .footer { background: #f8f9fa; padding: 16px 20px; font-size: 12px; color: #636e72; border-top: 1px solid #eee; text-align: center; }
  @media (max-width: 600px) {
    body { padding: 8px; }
    .container { border-radius: 8px; }
    .header { padding: 20px 16px; }
    .header h1 { font-size: 20px; }
    .market-table { font-size: 11px; }
    .market-table th, .market-table td { padding: 6px 4px; }
    .section-title { padding: 10px 16px; font-size: 14px; }
    .hide-mobile { display: none; }
  }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>{{.Title}}</h1>
    <div class="subtitle">{{.Date}} (SGT) &mdash; {{.ViewName}}</div>
  </div>

  {{range .Sections}}
  <div class="section-title">{{.Name}}</div>
  <table class="market-table">
    <thead>
      <tr>
        <th>Market</th>
        <th>Price</th>
        <th>1D</th>
        <th>1W</th>
        <th class="hide-mobile">1M</th>
        <th class="hide-mobile">3M</th>
        <th>1Y</th>
        <th class="hide-mobile">5Y</th>
        <th>Trend</th>
      </tr>
    </thead>
    <tbody>
      {{range .Rows}}
      <tr>
        <td>{{.Name}}</td>
        <td>{{.Price}}</td>
        <td class="{{if gt .ChangePct 0.0}}bg-pos positive{{else if lt .ChangePct 0.0}}bg-neg negative{{else}}neutral{{end}}">{{.ChangePctStr}} {{.ChangeArrow}}</td>
        {{range $i, $h := .Historical}}{{if eq $i 0}}<td class="{{$h.Class}}">{{$h.Value}}</td>
        {{else if eq $i 1}}<td class="{{$h.Class}} hide-mobile">{{$h.Value}}</td>
        {{else if eq $i 2}}<td class="{{$h.Class}} hide-mobile">{{$h.Value}}</td>
        {{else if eq $i 4}}<td class="{{$h.Class}}">{{$h.Value}}</td>
        {{else if eq $i 6}}<td class="{{$h.Class}} hide-mobile">{{$h.Value}}</td>
        {{end}}{{end}}
        <td>{{trendArrow .ChangePct}}</td>
      </tr>
      {{end}}
    </tbody>
  </table>
  {{end}}

  {{if .HasMovers}}
  <div class="section-title">Top Movers</div>
  {{range .Movers}}
  <div class="movers-title">{{.Region}}</div>
  <div class="movers-grid">
    <div class="movers-col">
      <h4 class="positive">▲ Top Gainers</h4>
      {{range .Gainers}}<div class="mover-item {{.Class}}">{{.Name}}: {{.ChangePct}}</div>{{end}}
    </div>
    <div class="movers-col">
      <h4 class="negative">▼ Top Losers</h4>
      {{range .Losers}}<div class="mover-item {{.Class}}">{{.Name}}: {{.ChangePct}}</div>{{end}}
    </div>
  </div>
  {{end}}
  {{end}}

  <div class="footer">
    Generated: {{.Generated}} | Powered by OpenClaw Market Overview
  </div>
</div>
</body>
</html>
